{% load compressed %}
{% load staticfiles %}
<!DOCKTYPE html>
<html lang = "en"> 
	<head> 
		<title> Rateker </title> 
		<link rel="stylesheet" href = "{% static 'bower_components/angular-material/angular-material.min.css' %}">
		<link rel="stylesheet" href = "{% static 'css/app.css' %}">

		<link rel="stylesheet" href = "{% static 'bower_components/angular-loading-bar/src/loading-bar.css' %}">

		{% compressed_css 'core' %}


	</head>

	<body ng-controller="appController" layout = "vertical"> 
		<rk-toolbar ng-show = "isLoggedIn"></rk-toolbar>
		<md-toolbar class = "md-theme-green "></md-toolbar>
		<div class="global-container" layout = "horizontal" layout-align = "start start">
			<ui-view></ui-view>
 			<div class = "right-pane" adjust-right-pane ng-show="isLoggedIn">
				<ng-include src="'/static/js/app/components/right-pane/right-pane.html'"></ng-include>
			</div>

			<div class="right-pane-bro" flex></div>
		</div>

		{% compressed_js 'check' %}

		<script>
			// Add the CSRF Token
			var app = angular.module('rateker'); // Not including a list of dependent modules (2nd parameter to `module`) "re-opens" the module for additional configuration
			app.config(['$httpProvider', function($httpProvider) {
			    $httpProvider.defaults.headers.common['X-CSRFToken'] = '{{ csrf_token|escapejs }}';
			}]);

			app.run(['Auth', function(Auth) {
				console.log("Run");
				{% if data %}
				Auth.sessionLogIn('{{data.username}}');
				{% endif %}
			}]);
		</script>
		
<!--        <script type="text/javascript" src="{% static 'js/app/controllers.js' %}"></script>-->
	</body>

</html>
